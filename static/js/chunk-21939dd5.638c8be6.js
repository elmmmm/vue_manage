(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21939dd5"],{5707:function(e,t,o){"use strict";o("7c84")},"64be":function(e,t,o){},7139:function(e,t,o){"use strict";o("64be")},"7c84":function(e,t,o){},de6d:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("my-banner",{attrs:{keyword:e.keyword},on:{addGoods:e.addGoods}}),o("my-table",{attrs:{tableData:e.tableData,tableColumn:e.tableColumn,pagerConfig:e.pagerConfig},on:{changePage:e.getGoods,edit:e.editGoods,del:e.delGoods}}),o("goods-dialog",{ref:"dialog",attrs:{title:e.title,rowData:e.rowData}})],1)},l=[],i=o("5530"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"my-table"},[o("el-table",{ref:"multipleTable",attrs:{data:e.tableData,size:"medium",stripe:"",border:""},on:{select:e.selectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"40"}}),e._l(e.tableColumn,(function(t){return o("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",align:"center",label:t.label,width:t.width?t.width:100},scopedSlots:e._u([{key:"default",fn:function(a){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row[t.prop]))])]}}],null,!0)})})),o("el-table-column",{attrs:{label:"操作","min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return e.handleEdit(t.row)}}},[e._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],2),o("div",{staticClass:"goods-footer"},[o("div",{staticStyle:{"margin-top":"6px"}},[o("el-button",{attrs:{size:"small"},on:{click:e.deleteSelection}},[e._v("批量删除")]),o("el-button",{attrs:{size:"small"},on:{click:e.toggleSelection}},[e._v("取消选择")])],1),o("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total, prev, pager, next",total:e.pagerConfig.totol,"current-page":e.pagerConfig.page,"page-size":7},on:{"update:currentPage":function(t){return e.$set(e.pagerConfig,"page",t)},"update:current-page":function(t){return e.$set(e.pagerConfig,"page",t)},"current-change":e.changePage}})],1)],1)},n=[],s=(o("d81d"),{name:"MyTable",props:{tableData:Array,tableColumn:Array,pagerConfig:Object},data:function(){return{selection:[]}},methods:{handleEdit:function(e){this.$emit("edit",e)},handleDelete:function(e){this.$emit("del",e)},changePage:function(e){this.$emit("changePage",e)},selectionChange:function(e,t){console.log(e),this.selection=e},toggleSelection:function(){this.$refs.multipleTable.clearSelection()},deleteSelection:function(){var e=this.selection.map((function(e,t,o){return e.id}));this.$parent.delGoods(e)}}}),d=s,c=(o("5707"),o("2877")),u=Object(c["a"])(d,r,n,!1,null,"58fb4880",null),p=u.exports,m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search"},[o("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-search",clearable:"",placeholder:"请输入品牌或型号"},on:{clear:e.clear},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}),o("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:e.search}},[e._v("查询")]),o("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:e.addHandle}},[e._v("添加")])],1)},g=[],f={props:{keyword:{type:String}},data:function(){return{val:this.keyword}},methods:{search:function(){console.log(this.$parent),this.$parent.keyword=this.val,this.$parent.getGoods()},clear:function(){this.$parent.keyword="",this.$parent.getGoods()},addHandle:function(){this.$emit("addGoods")}}},b=f,h=(o("7139"),Object(c["a"])(b,m,g,!1,null,"e801c6d2",null)),w=h.exports,y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{width:"40%",title:e.title,visible:e.dialogVisible,"before-close":e.clearForm},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.goodsForm,rules:e.rules,size:"medium","label-width":"100px"}},[o("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[o("el-input",{model:{value:e.goodsForm.name,callback:function(t){e.$set(e.goodsForm,"name",t)},expression:"goodsForm.name"}})],1),o("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[o("el-input",{model:{value:e.goodsForm.price,callback:function(t){e.$set(e.goodsForm,"price",t)},expression:"goodsForm.price"}})],1),o("el-form-item",{attrs:{label:"商品数量",prop:"num"}},[o("el-input",{model:{value:e.goodsForm.num,callback:function(t){e.$set(e.goodsForm,"num",t)},expression:"goodsForm.num"}})],1),o("el-form-item",{attrs:{label:"发布时间"}},[o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{prop:"date1"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.goodsForm.date1,callback:function(t){e.$set(e.goodsForm,"date1",t)},expression:"goodsForm.date1"}})],1)],1),o("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{prop:"date2"}},[o("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.goodsForm.date2,callback:function(t){e.$set(e.goodsForm,"date2",t)},expression:"goodsForm.date2"}})],1)],1)],1),o("el-form-item",{attrs:{label:"商品品牌",prop:"brand"}},[o("el-input",{model:{value:e.goodsForm.brand,callback:function(t){e.$set(e.goodsForm,"brand",t)},expression:"goodsForm.brand"}})],1),o("el-form-item",{attrs:{label:"商品图片",prop:"image"}},[o("el-input",{model:{value:e.goodsForm.image,callback:function(t){e.$set(e.goodsForm,"image",t)},expression:"goodsForm.image"}}),o("img",{staticStyle:{"margin-top":"10px"},attrs:{src:e.goodsForm.image,height:"150px",alt:""}})],1),o("el-form-item",{attrs:{label:"商品卖点",prop:"sellPoint"}},[o("el-input",{model:{value:e.goodsForm.sellPoint,callback:function(t){e.$set(e.goodsForm,"sellPoint",t)},expression:"goodsForm.sellPoint"}})],1),o("el-form-item",{attrs:{label:"商品描述",prop:"descp"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.goodsForm.descp,callback:function(t){e.$set(e.goodsForm,"descp",t)},expression:"goodsForm.descp"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),o("el-button",{on:{click:e.clearForm}},[e._v("取 消")])],1)],1)},F=[],v={props:{title:{type:String,default:"添加商品"},rowData:{type:Object,default:{}}},data:function(){return{isShow:!1,dialogVisible:!1,innerVisible:!1,innerVisibleImg:!1,imgUrl:"",goodsForm:{id:0,name:"",price:0,num:0,brand:"",image:"",sellPoint:"",descp:"",date1:"",date2:""},groups:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],num:[{required:!0,message:"请输入库存数量",trigger:"blur"}],brand:[{required:!0,message:"请输入商品品牌",trigger:"blur"}]}}},watch:{rowData:function(e){console.log("监听数据变化",e),this.goodsForm=e}},methods:{submitForm:function(){var e=this;"添加商品"==this.title?this.$http.addGoods(this.goodsForm).then((function(t){200==t.data.code&&(e.$message({type:"success",message:"添加商品条目成功"}),e.$parent.getGoods(),e.clearForm())})):this.$http.editGoods(this.goodsForm).then((function(t){200==t.data.code&&(e.$message({type:"success",message:"编辑商品条目成功"}),e.$parent.getGoods(),e.clearForm())}))},clearForm:function(){this.$refs["ruleForm"].resetFields(),this.goodsForm={id:0,name:"",price:0,num:0,brand:"",image:"",sellPoint:"",descp:"",date1:"",date2:""},this.dialogVisible=!1}},mounted:function(){console.log("对话框挂载",this.$refs)}},$=v,k=Object(c["a"])($,y,F,!1,null,null,null),C=k.exports,x={components:{MyTable:p,MyBanner:w,GoodsDialog:C},data:function(){return{keyword:"",tableData:[],tableColumn:[{prop:"id",label:"商品ID",width:70},{prop:"name",label:"品名",width:140},{prop:"price",label:"价格",width:70},{prop:"num",label:"库存数量",width:80},{prop:"brand",label:"品牌"},{prop:"image",label:"图片",width:120},{prop:"sellPoint",label:"卖点",width:130},{prop:"descp",label:"标题描述",width:120}],pagerConfig:{page:1,totol:30},title:"添加商品",rowData:{}}},methods:{getGoods:function(e){var t=this;e||(e=1,this.pagerConfig.page=1),this.$http.getGoodsList({pagenum:e,keyword:this.keyword}).then((function(e){if(200==e.status){var o=e.data,a=o.count,l=o.goodslist;t.pagerConfig.totol=a,t.tableData=l}})).catch((function(e){console.log(e)}))},addGoods:function(){this.$refs.dialog.dialogVisible=!0,this.title="添加商品"},editGoods:function(e){this.$refs.dialog.dialogVisible=!0,this.title="编辑商品",this.rowData=Object(i["a"])({},e)},delGoods:function(e){var t=this;Array.isArray(e)||(e=[e.id]),this.$confirm("确认永久删除商品的数据？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.delGoods({idArr:e}).then((function(e){200==e.data.code&&(t.$message({type:"success",message:"删除成功"}),t.getGoods(t.pagerConfig.page))})).catch((function(e){console.log(e)}))}))}},created:function(){this.getGoods()}},G=x,_=Object(c["a"])(G,a,l,!1,null,null,null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-21939dd5.638c8be6.js.map